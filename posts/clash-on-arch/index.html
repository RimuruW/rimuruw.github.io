<!DOCTYPE html>
<html lang="zh-cn">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='前言 在此之前，我使用的代理解决方案是 Qv2ray &#43; cgproxy 透明代理。
Qv2ray 是 Linux 下久负盛名的 GUI 代理程序，在 Linux 用户群中有极高的热度。截止目前（2021 年 8 月 17 日），Qv2ray 的 GitHub Star 为 11.9k。
但是自 4 月 30 日 Qv2ray 开发组及 V2Fly 项目相关成员发生内部冲突以来，Qv2ray 的开发基本停滞。如果说此前还可以用 qv2ray-git (3.0.0) 自欺欺人的话，那么现在 Qv2ray README 的声明则是对这场闹剧的终结。
  Qv2ray: 2019-03-28 - 2021-08-17
 自 4 月 30 日开发者内部出现矛盾之后的四个月中，并无活跃开发者参与维护，其他组织成员也并未有足够贡献量/能力，因此我们决定停止维护本项目，最新 Release 可见于 v2.7.0。
感谢所有 Qv2ray 用户，项目组成员与外部贡献者，V2Fly 项目组成员及 V2Ray-Core 外部贡献者
致敬
gcc 写于 8 月 17 日
 作为一个见证了闹剧的开始与落幕的观众，我内心的失望是不言而喻的。如果之前对开源社区还抱有极高的崇敬与憧憬的话，现在算是认清了“开发者也是通俗意义上的人”的事实。Qv2ray 事件也好，RMS 事件也罢，由人组成的团体可以如此相似和单调枯燥。'><title>Arch Linux Clash 安装配置记录</title>

<link rel='canonical' href='https://blog.linioi.com/posts/clash-on-arch/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Arch Linux Clash 安装配置记录'>
<meta property='og:description' content='前言 在此之前，我使用的代理解决方案是 Qv2ray &#43; cgproxy 透明代理。
Qv2ray 是 Linux 下久负盛名的 GUI 代理程序，在 Linux 用户群中有极高的热度。截止目前（2021 年 8 月 17 日），Qv2ray 的 GitHub Star 为 11.9k。
但是自 4 月 30 日 Qv2ray 开发组及 V2Fly 项目相关成员发生内部冲突以来，Qv2ray 的开发基本停滞。如果说此前还可以用 qv2ray-git (3.0.0) 自欺欺人的话，那么现在 Qv2ray README 的声明则是对这场闹剧的终结。
  Qv2ray: 2019-03-28 - 2021-08-17
 自 4 月 30 日开发者内部出现矛盾之后的四个月中，并无活跃开发者参与维护，其他组织成员也并未有足够贡献量/能力，因此我们决定停止维护本项目，最新 Release 可见于 v2.7.0。
感谢所有 Qv2ray 用户，项目组成员与外部贡献者，V2Fly 项目组成员及 V2Ray-Core 外部贡献者
致敬
gcc 写于 8 月 17 日
 作为一个见证了闹剧的开始与落幕的观众，我内心的失望是不言而喻的。如果之前对开源社区还抱有极高的崇敬与憧憬的话，现在算是认清了“开发者也是通俗意义上的人”的事实。Qv2ray 事件也好，RMS 事件也罢，由人组成的团体可以如此相似和单调枯燥。'>
<meta property='og:url' content='https://blog.linioi.com/posts/clash-on-arch/'>
<meta property='og:site_name' content='清絮的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Arch Linux' /><meta property='article:tag' content='Clash' /><meta property='article:tag' content='Linux' /><meta property='article:published_time' content='2021-08-17T23:32:39&#43;08:00'/><meta property='article:modified_time' content='2021-08-17T23:32:39&#43;08:00'/><meta property='og:image' content='https://blog.linioi.com/posts/clash-on-arch/clash.png' />
<meta name="twitter:site" content="@QingxuMo">
    <meta name="twitter:creator" content="@QingxuMo"><meta name="twitter:title" content="Arch Linux Clash 安装配置记录">
<meta name="twitter:description" content="前言 在此之前，我使用的代理解决方案是 Qv2ray &#43; cgproxy 透明代理。
Qv2ray 是 Linux 下久负盛名的 GUI 代理程序，在 Linux 用户群中有极高的热度。截止目前（2021 年 8 月 17 日），Qv2ray 的 GitHub Star 为 11.9k。
但是自 4 月 30 日 Qv2ray 开发组及 V2Fly 项目相关成员发生内部冲突以来，Qv2ray 的开发基本停滞。如果说此前还可以用 qv2ray-git (3.0.0) 自欺欺人的话，那么现在 Qv2ray README 的声明则是对这场闹剧的终结。
  Qv2ray: 2019-03-28 - 2021-08-17
 自 4 月 30 日开发者内部出现矛盾之后的四个月中，并无活跃开发者参与维护，其他组织成员也并未有足够贡献量/能力，因此我们决定停止维护本项目，最新 Release 可见于 v2.7.0。
感谢所有 Qv2ray 用户，项目组成员与外部贡献者，V2Fly 项目组成员及 V2Ray-Core 外部贡献者
致敬
gcc 写于 8 月 17 日
 作为一个见证了闹剧的开始与落幕的观众，我内心的失望是不言而喻的。如果之前对开源社区还抱有极高的崇敬与憧憬的话，现在算是认清了“开发者也是通俗意义上的人”的事实。Qv2ray 事件也好，RMS 事件也罢，由人组成的团体可以如此相似和单调枯燥。"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://blog.linioi.com/posts/clash-on-arch/clash.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/posts/clash-on-arch/">
                <img src="/posts/clash-on-arch/clash_hua5d991d6ea7f5c9325c13aae37ad3ea1_62330_800x0_resize_box_3.png"
                        srcset="/posts/clash-on-arch/clash_hua5d991d6ea7f5c9325c13aae37ad3ea1_62330_800x0_resize_box_3.png 800w, /posts/clash-on-arch/clash_hua5d991d6ea7f5c9325c13aae37ad3ea1_62330_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post Arch Linux Clash 安装配置记录" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/linux/" >
                Linux
            </a>
        
            <a href="/categories/arch-linux/" >
                Arch Linux
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/posts/clash-on-arch/">Arch Linux Clash 安装配置记录</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 17, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 5 分钟
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h2 id="前言">前言</h2>
<p>在此之前，我使用的代理解决方案是 Qv2ray + cgproxy 透明代理。</p>
<p><a class="link" href="https://github.com/Qv2ray/Qv2ray"  target="_blank" rel="noopener"
    >Qv2ray</a> 是 Linux 下久负盛名的 GUI 代理程序，在 Linux 用户群中有极高的热度。截止目前（2021 年 8 月 17 日），Qv2ray 的 GitHub Star 为 11.9k。</p>
<p>但是自  4 月 30 日 Qv2ray 开发组及 V2Fly 项目相关成员发生内部冲突以来，Qv2ray 的开发基本停滞。如果说此前还可以用 qv2ray-git (3.0.0) 自欺欺人的话，那么现在 Qv2ray <a class="link" href="https://github.com/Qv2ray/Qv2ray"  target="_blank" rel="noopener"
    >README</a> 的声明则是对这场闹剧的终结。</p>
<blockquote>
<blockquote>
<p>Qv2ray: <em>2019-03-28 - 2021-08-17</em></p>
</blockquote>
<p>自 4 月 30 日开发者内部出现矛盾之后的四个月中，并无活跃开发者参与维护，其他组织成员也并未有足够贡献量/能力，因此我们决定停止维护本项目，最新 Release 可见于 <a class="link" href="https://github.com/Qv2ray/Qv2ray/releases/tag/v2.7.0"  target="_blank" rel="noopener"
    >v2.7.0</a>。</p>
<p>感谢所有 Qv2ray 用户，项目组成员与外部贡献者，V2Fly 项目组成员及 V2Ray-Core 外部贡献者</p>
<p>致敬</p>
<p>gcc 写于 8 月 17 日</p>
</blockquote>
<p>作为一个见证了闹剧的开始与落幕的观众，我内心的失望是不言而喻的。如果之前对开源社区还抱有极高的崇敬与憧憬的话，现在算是认清了“开发者也是通俗意义上的人”的事实。Qv2ray 事件也好，RMS 事件也罢，由人组成的团体可以如此相似和单调枯燥。</p>
<p>属于 Qv2ray 的时代已经谢幕。可预见的是，如果 Linux 开源社区仍然像这样一滩死水的话，Linux 也到了淡出舞台的时候了，它过去所让人热爱和追捧的一切会是最后击垮它的落石。</p>
<h2 id="安装-clash">安装 Clash</h2>
<p><a class="link" href="https://github.com/Dreamacro/clash"  target="_blank" rel="noopener"
    >Clash</a> 是一个由 Go 语言开发的多平台代理客户端。</p>
<p>Arch Linux 官方仓库和 AUR 中分别提供了 <a class="link" href="https://archlinux.org/packages/community/x86_64/clash/"  target="_blank" rel="noopener"
    >clash</a> 和 <a class="link" href="https://aur.archlinux.org/packages/clash-premium-bin"  target="_blank" rel="noopener"
    >clash-premium-bin</a> 可供下载。关于 Clash 普通版本与 premium 版本的区别可以看<a class="link" href="https://github.com/Dreamacro/clash/wiki/premium-core-features"  target="_blank" rel="noopener"
    >官方 Wiki</a>。简而言之，Clash Premium 版本拥有更多的功能但是闭源，而 Clash 普通版本是开源的，用户可以根据自己的需求选择。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 安装 Clash 普通版本（使用 Pacman）</span>
sudo pacman -S clash
<span style="color:#75715e"># 安装 Clash Premium 版本（使用 Yay）</span>
yay -S clash-premium-bin
</code></pre></div><p>如果你使用的不是 Arch Linux，你也可以直接从项目的 <a class="link" href="https://github.com/Dreamacro/clash/releases"  target="_blank" rel="noopener"
    >release</a> 或 <a class="link" href="https://github.com/Dreamacro/clash/releases/tag/premium"  target="_blank" rel="noopener"
    >release premium</a> 中下载对应架构的 Linux 版本安装包并解压。release 中解压后的可执行文件名字可能不是 clash，建议将解压后的可执行文件重命名为 clash。为了可以方便地全局使用 Clash，建议将 Clash 复制至 <code>/usr/local/bin</code> 并赋予可执行权限。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 复制 Clash 至 /usr/local/bin</span>
sudo cp clash /usr/local/bin
<span style="color:#75715e"># 赋予 Clash 可执行权限</span>
sudo chmod +x /usr/local/bin/clash
</code></pre></div><h2 id="配置-clash">配置 Clash</h2>
<p>首先直接在终端启动 Clash 生成基础配置文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">clash
</code></pre></div><p>Clash 启动后会在 ~/.config/clash 目录生成配置文件。其中 ~/.config/clash/config.yaml 是需要你自定义的 Clash 的配置文件，存储你的节点和规则。你可以直接用你的配置文件覆盖这个文件。如果你使用的是 V2Ray 这样的代理程序的订阅/节点，你可以参考这个<a class="link" href="https://lancellc.gitbook.io/clash/"  target="_blank" rel="noopener"
    >教程</a>手动转换你的配置文件或者使用<a class="link" href="https://merlinblog.xyz/wiki/api.html"  target="_blank" rel="noopener"
    >第三方服务</a>自动转换。</p>
<p>修改完配置文件后，重新运行 Clash 即可实现代理。</p>
<h2 id="全局代理实现">全局代理实现</h2>
<p>系统代理可以让我们全局使用代理。在启用系统代理前，我们需要先确认一下 Clash 的 配置信息。</p>
<p>Clash 配置文件开头部分大致如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">port</span>: <span style="color:#ae81ff">7890</span> <span style="color:#75715e"># HTTP/HTTPS 端口</span>
<span style="color:#f92672">socks-port</span>: <span style="color:#ae81ff">7891</span> <span style="color:#75715e"># Socks 端口</span>
<span style="color:#f92672">allow-lan</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 不知道什么意思的话保持默认即可</span>
<span style="color:#f92672">mode</span>: <span style="color:#ae81ff">Rule</span> <span style="color:#75715e"># 默认模式，可选项有 Rule，Global,Direct。一般保持默认即可。</span>
<span style="color:#f92672">log-level</span>: <span style="color:#ae81ff">info</span> <span style="color:#75715e"># 不知道什么意思的话保持默认即可</span>
<span style="color:#f92672">external-controller</span>: :<span style="color:#ae81ff">9090</span> <span style="color:#75715e"># 外置管理器端口，后文会用到</span>
<span style="color:#f92672">sercet</span>:  <span style="color:#75715e"># 外置管理器连接密钥</span>
</code></pre></div><h3 id="系统代理设置">系统代理设置</h3>
<p>理想情况下，我们可以直接在 <code>设置</code> 设置系统代理。一般在 <code>设置</code>-<code>网络</code> 可以找到相关选项。</p>
<p><figure 
	
		class="gallery-image" 
		style="
			flex-grow: 140; 
			flex-basis: 338px"
	>
	<a href="/posts/clash-on-arch/image-20210818012020999.png" data-size="2052x1456">
		<img src="/posts/clash-on-arch/image-20210818012020999.png"
			width="2052"
			height="1456"
			srcset="/posts/clash-on-arch/image-20210818012020999_hu3e5aa5be8bf63212cc5f8ab501d7385b_112366_480x0_resize_box_3.png 480w, /posts/clash-on-arch/image-20210818012020999_hu3e5aa5be8bf63212cc5f8ab501d7385b_112366_1024x0_resize_box_3.png 1024w"
			loading="lazy"
			alt="网络代理">
	</a>
	
	<figcaption>网络代理</figcaption>
	
</figure></p>
<p>然后根据自己配置文件填入相关配置信息即可。</p>
<p><figure 
	
		class="gallery-image" 
		style="
			flex-grow: 112; 
			flex-basis: 270px"
	>
	<a href="/posts/clash-on-arch/image-20210818012226124.png" data-size="970x860">
		<img src="/posts/clash-on-arch/image-20210818012226124.png"
			width="970"
			height="860"
			srcset="/posts/clash-on-arch/image-20210818012226124_hue2eb9f9f9a3fd4f7c5518a6f21f67ec6_71513_480x0_resize_box_3.png 480w, /posts/clash-on-arch/image-20210818012226124_hue2eb9f9f9a3fd4f7c5518a6f21f67ec6_71513_1024x0_resize_box_3.png 1024w"
			loading="lazy"
			alt="网络代理">
	</a>
	
	<figcaption>网络代理</figcaption>
	
</figure></p>
<p>其中，<code>127.0.0.1</code> 是本机地址（localhost），如果你不懂什么意思，保持默认即可。</p>
<p><code>7890</code> 和 <code>7891</code> 这样的是端口（port）地址，对应你配置文件的 <code>port</code> 和 <code>socks-port</code>。</p>
<h3 id="设置终端代理">设置终端代理</h3>
<p>部分情况下，终端的运行程序可能不会走系统代理。我们可以通过 <a class="link" href="https://archlinux.org/packages/community/x86_64/proxychains-ng/"  target="_blank" rel="noopener"
    >proxychains-ng</a> 让这些程序也走代理。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 安装 proxychains-ng</span>
sudo pacman -S proxychains-ng
</code></pre></div><p>然后编辑 proxychains-ng 修改配置文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo vim /etc/proxychains.conf
</code></pre></div><p>直接翻到文件末尾，按照你的 Clash 配置文件设置代理列表。</p>
<p>例如：</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">[ProxyList]
# add proxy here ...
# meanwile
# defaults set to &quot;tor&quot;
socks5 	127.0.0.1 7891
</code></pre><p>这样，我们直接在终端输入 <code>proxychains</code> 再加上命令就可以让这个命令走代理了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">proxychains &lt;command&gt;
</code></pre></div><p>我们还可以设置相应代理的环境变量，大部分终端运行的程序会读取这这些变量。</p>
<p>输入如下命令在当前 shell 设置代理</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export http_proxy<span style="color:#f92672">=</span>127.0.0.1:7890
export https_proxy<span style="color:#f92672">=</span>127.0.0.1:7890
export socks_proxy<span style="color:#f92672">=</span>127.0.0.1:7891
</code></pre></div><p>使用 export 设置环境变量只在当前 shell 有效。</p>
<p>如果你想保持这个设置，可以在 <code>/etc/environment </code> 设置相应变量。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 打开 /etc/environment  </span>
sudo vim /etc/environment  
<span style="color:#75715e"># 在 /etc/environment 中加入如下内容</span>
http_proxy<span style="color:#f92672">=</span>127.0.0.1:7890
https_proxy<span style="color:#f92672">=</span>127.0.0.1:7890
socks_proxy<span style="color:#f92672">=</span>127.0.0.1:7891
</code></pre></div><h3 id="其他代理">其他代理</h3>
<p>部分软件可能有自己的一套代理方案，比如 Firefox 和 Chrome 可以在软件设置中设置网络代理。这些需要你自己处理。</p>
<h2 id="添加-clash-至守护进程">添加 Clash 至守护进程</h2>
<p>在添加之前，我们需要先确认一下 Clash 的<strong>绝对路径</strong>。</p>
<p>输入如下命令查看 Clash 的绝对路径。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 输出结果即为 Clash 的绝对路径</span>
which clash
</code></pre></div><p>Arch Linux 的默认绝对路径为 <code>/usr/bin/clash</code></p>
<p>如果你是其他发行版并且按照上面教程操作，你的绝对路径可能是 <code>/usr/local/bin/clash</code></p>
<p>下面需要根据你的实际情况修改。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 创建文件夹用以存储 Clash 相关文件</span>
sudo mkdir -p /etc/clash
<span style="color:#75715e"># 复制相关文件</span>
sudo cp ~/.config/clash/config.yaml /etc/clash/
sudo cp ~/.config/clash/Country.mmdb /etc/clash/
</code></pre></div><p>创建 systemd 配置文件 <code>/etc/systemd/system/clash.service</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 编辑 /etc/systemd/system/clash.service</span>
sudo vim /etc/systemd/system/clash.service

<span style="color:#75715e"># 加入如下行</span>

<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Clash daemon, A rule-based proxy in Go.
After<span style="color:#f92672">=</span>network.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
Type<span style="color:#f92672">=</span>simple
Restart<span style="color:#f92672">=</span>always
ExecStart<span style="color:#f92672">=</span>/usr/bin/clash -d /etc/clash <span style="color:#75715e"># /usr/bin/clash 为绝对路径，请根据你实际情况修改</span>

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target
</code></pre></div><p>添加 Clash 至守护进程</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl enable clash
</code></pre></div><p>立即启动 Clash</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl start clash
</code></pre></div><blockquote>
<p>其他 systemd 命令：</p>
<ul>
<li>重新启动 Clash</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl restart clash
</code></pre></div><ul>
<li>获取 Clash 日志</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl status clash
<span style="color:#75715e"># 或者</span>
journalctl -xe
</code></pre></div><p>如果想获取存储日志信息至文件，可以在上面的 systemd 配置文件加入如下行</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Works only in systemd v240 and newer!</span>
StandardOutput<span style="color:#f92672">=</span>append:/var/log/clash/log.log
StandardError<span style="color:#f92672">=</span>append:/var/log/clash/error.log
</code></pre></div></blockquote>
<h2 id="添加外置规则premium-版本可用">添加外置规则（Premium 版本可用）</h2>
<p><a class="link" href="https://github.com/Loyalsoldier/clash-rules"  target="_blank" rel="noopener"
    >clash-rules</a> 提供了 Clash Premium 可用的规则合集，只需要在 Clash 配置文件中添加如下 <code>rule-providers</code> 和 <code>rules</code> 即可使用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">rule-providers</span>:
  <span style="color:#f92672">reject</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/reject.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">icloud</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/icloud.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">apple</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/apple.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">google</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/google.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">proxy</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/proxy.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">direct</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/direct.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">private</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/private.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">gfw</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/gfw.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">greatfire</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/greatfire.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">tld-not-cn</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">domain</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/tld-not-cn.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">telegramcidr</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">ipcidr</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/telegramcidr.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">cncidr</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">ipcidr</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/cncidr.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

  <span style="color:#f92672">lancidr</span>:
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">http</span>
    <span style="color:#f92672">behavior</span>: <span style="color:#ae81ff">ipcidr</span>
    <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt&#34;</span>
    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./ruleset/lancidr.yaml</span>
    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">86400</span>

<span style="color:#f92672">rules</span>:
  - <span style="color:#ae81ff">PROCESS-NAME,v2ray,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,xray,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,naive,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,trojan,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,trojan-go,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,ss-local,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,privoxy,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,leaf,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,v2ray.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,xray.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,naive.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,trojan.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,trojan-go.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,ss-local.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,privoxy.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,leaf.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge 2,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge 3,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge 4,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge%202,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge%203,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Surge%204,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Thunder,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,DownloadService,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,qBittorrent,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Transmission,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,fdm,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,aria2c,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Folx,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,NetTransport,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,uTorrent,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,WebTorrent,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,aria2c.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,BitComet.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,fdm.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,NetTransport.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,qbittorrent.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,Thunder.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,ThunderVIP.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,transmission-daemon.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,transmission-qt.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,uTorrent.exe,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,WebTorrent.exe,DIRECT</span>
  - <span style="color:#ae81ff">DOMAIN,clash.razord.top,DIRECT</span>
  - <span style="color:#ae81ff">DOMAIN,yacd.haishan.me,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,private,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,reject,REJECT</span>
  - <span style="color:#ae81ff">RULE-SET,icloud,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,apple,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,google,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,proxy,PROXY</span>
  - <span style="color:#ae81ff">RULE-SET,direct,DIRECT</span>
  - <span style="color:#ae81ff">RULE-SET,telegramcidr,PROXY</span>
  - <span style="color:#ae81ff">GEOIP,,DIRECT</span>
  - <span style="color:#ae81ff">GEOIP,CN,DIRECT</span>
  - <span style="color:#ae81ff">MATCH,PROXY</span>
</code></pre></div><p>某些特殊的软件我们不希望它走代理，这里可以一并加上。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">rules</span>:
  - <span style="color:#ae81ff">PROCESS-NAME,pacman,DIRECT</span>
  - <span style="color:#ae81ff">PROCESS-NAME,yay,DIRECT</span>
</code></pre></div><p>更多的规则配置方法可以参照这篇<a class="link" href="https://lancellc.gitbook.io/clash/clash-config-file/rules"  target="_blank" rel="noopener"
    >教程</a>。</p>
<h2 id="使用-web-管理面板可选">使用 Web 管理面板（可选）</h2>
<p>Clash 官方提供了 <a class="link" href="https://github.com/Dreamacro/clash-dashboard"  target="_blank" rel="noopener"
    >clash-dashboard</a> 用以图形化管理，尽管我觉得没啥用，但是可能对于某些人是刚需。</p>
<p>clash-dashboard 依赖 Yarn 和 Node.js 运行。你也可以构建好网站源码然后找个地方托管直接访问或者本地 Nginx 之类的，这里不作说明。</p>
<p>如果你没有安装 Node.js 的话，先安装如下命令借助 <a class="link" href="https://github.com/nvm-sh/nvm"  target="_blank" rel="noopener"
    >nvm</a> 安装 Node.js</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 下面的版本号 v0.38.0 请手动修改为最新版本号</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash

<span style="color:#75715e"># 向 ~/.bashrc 加入如下内容</span>
export NVM_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.nvm&#34;</span>
<span style="color:#f92672">[</span> -s <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/nvm.sh&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\.</span> <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/nvm.sh&#34;</span>  <span style="color:#75715e"># This loads nvm</span>
<span style="color:#f92672">[</span> -s <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/bash_completion&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\.</span> <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/bash_completion&#34;</span>  <span style="color:#75715e"># This loads nvm bash_completion</span>

<span style="color:#75715e"># 如果你使用的是 zsh 的话，同时也向 ～/.zshrc 加入如下内容</span>
source ~/.bashrc
</code></pre></div><p>然后加载配置文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># bash 用户</span>
source ~/.bashrc
<span style="color:#75715e"># zsh 用户</span>
source ~/.zshrc
</code></pre></div><p>最后安装 Node.js Stable 版本</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nvm install stable
</code></pre></div><p>如果你没有安装 Yarn 的话，可以使用 NPM 全局安装 Yarn。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 修改 NPM 镜像源为淘宝源（可选）</span>
npm config set registry http://registry.npm.taobao.org/
<span style="color:#75715e"># 全局安装 Yarn</span>
npm install -g yarn
<span style="color:#75715e"># Yarn 配置淘宝源（可选）</span>
yarn config set registry https://registry.npm.taobao.org      
</code></pre></div><p>Yarn 和 Node.js 都满足后，下载并安装 clash-dashboard 所需依赖</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 如果未安装 Git 则先安装 Git</span>
sudo pacman -S git
<span style="color:#75715e"># Clone clash-dashboard 源码</span>
git clone https://github.com/Dreamacro/clash-dashboard
<span style="color:#75715e"># 跳转到 clash-dashboard 目录</span>
cd clash-dashboard
<span style="color:#75715e"># Yarn 安装所需依赖</span>
yarn install
</code></pre></div><p>以上都配置完后，在 clash-dashboard 输入如下命令即可启动 clash-dashboard</p>
<pre tabindex="0"><code>yarn start
</code></pre><p>此时终端会显示 Web 管理面版的地址，如下图所示</p>
<p><figure 
	
		class="gallery-image" 
		style="
			flex-grow: 134; 
			flex-basis: 321px"
	>
	<a href="/posts/clash-on-arch/image-20210818024446945.png" data-size="1400x1044">
		<img src="/posts/clash-on-arch/image-20210818024446945.png"
			width="1400"
			height="1044"
			srcset="/posts/clash-on-arch/image-20210818024446945_hu8100f458ccd970d0c69038a79883624e_45718_480x0_resize_box_3.png 480w, /posts/clash-on-arch/image-20210818024446945_hu8100f458ccd970d0c69038a79883624e_45718_1024x0_resize_box_3.png 1024w"
			loading="lazy"
			alt="yarn start">
	</a>
	
	<figcaption>yarn start</figcaption>
	
</figure></p>
<p>我们可以看到，上图所示地址为 http://localhost:3000/，我们可以直接打开这个网址访问 Web 管理界面。</p>
<p>首次进入管理界面会要求你输入 Clash 的外置端口（默认 9090）和 sercet（默认为空），根据自己 Clash 配置文件输入即可。</p>
<p>最后界面大致如图所示</p>
<p><figure 
	
		class="gallery-image" 
		style="
			flex-grow: 166; 
			flex-basis: 400px"
	>
	<a href="/posts/clash-on-arch/image-20210818025247047.png" data-size="2564x1536">
		<img src="/posts/clash-on-arch/image-20210818025247047.png"
			width="2564"
			height="1536"
			srcset="/posts/clash-on-arch/image-20210818025247047_huf421a4604269890a5ea660d0a76c633b_200677_480x0_resize_box_3.png 480w, /posts/clash-on-arch/image-20210818025247047_huf421a4604269890a5ea660d0a76c633b_200677_1024x0_resize_box_3.png 1024w"
			loading="lazy"
			alt="clash-dashboard">
	</a>
	
	<figcaption>clash-dashboard</figcaption>
	
</figure></p>
<p><strong>注意</strong>！！你在 clash-board 中所有自定义设置均为临时设置，在 Clash 重启后会重置这些设置。如果真的想改什么的话建议直接修改 <code>/etc/clash/config.conf</code> 然后重启 Clash。</p>
<p>问：所以 clash-dashboard 有什么用啊？</p>
<p>答：<del>我也不知道</del>。</p>
<p>其实参考它的名字，思考一下为什么是 clash-dashboard 而不是 clash-web-manager 就可以得出答案了。clash-dashboard 作为仪表盘很好地、直观地向我们展示了 Clash 当前运行状况，在管理上也能提高一定的便利性。（<del>强行为其辩护</del>）</p>
<hr>
<p>参考：</p>
<ul>
<li><a class="link" href="https://lancellc.gitbook.io/clash/"  target="_blank" rel="noopener"
    >Unofficial Clash Wiki</a></li>
<li><a class="link" href="https://github.com/Dreamacro/clash/wiki"  target="_blank" rel="noopener"
    >Clash Wiki</a></li>
<li><a class="link" href="https://github.com/Dreamacro/clash-dashboard"  target="_blank" rel="noopener"
    >clash-dashboard</a></li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/arch-linux/">Arch Linux</a>
        
            <a href="/tags/clash/">Clash</a>
        
            <a href="/tags/linux/">Linux</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">相关文章</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/posts/18/">
        
        

        <div class="article-details">
            <h2 class="article-title">Arch Linux &#43; Windows 双系统安装教程</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/the-first-gnome-try/">
        
        

        <div class="article-details">
            <h2 class="article-title">记 GNOME 的初体验</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/5/">
        
        

        <div class="article-details">
            <h2 class="article-title">Arch Linux 服务器安装 LNMP</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/minecraft-build/">
        
        

        <div class="article-details">
            <h2 class="article-title">Minecraft 服务器搭建教程</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/6/">
        
        

        <div class="article-details">
            <h2 class="article-title">DD 指令用法详解</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
    
        
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"avatar":"mp","dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/alus","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"],"highlight":true,"locale":{"admin":"博主"},"mathtagsupport":true,"requiredMeta":["mail"],"serverURL":"https://waline.linioi.com","visitor":true});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 清絮的博客
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">目录</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#前言">前言</a></li>
    <li><a href="#安装-clash">安装 Clash</a></li>
    <li><a href="#配置-clash">配置 Clash</a></li>
    <li><a href="#全局代理实现">全局代理实现</a>
      <ol>
        <li><a href="#系统代理设置">系统代理设置</a></li>
        <li><a href="#设置终端代理">设置终端代理</a></li>
        <li><a href="#其他代理">其他代理</a></li>
      </ol>
    </li>
    <li><a href="#添加-clash-至守护进程">添加 Clash 至守护进程</a></li>
    <li><a href="#添加外置规则premium-版本可用">添加外置规则（Premium 版本可用）</a></li>
    <li><a href="#使用-web-管理面板可选">使用 Web 管理面板（可选）</a></li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
